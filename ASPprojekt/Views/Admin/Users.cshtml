@model IEnumerable<ASPprojekt.Areas.Identity.Data.ASPprojektUser>
@using ASPprojekt.Areas.Identity.Data
@using System;
@using Microsoft.AspNetCore.Identity
@inject ASPprojekt.Areas.Identity.Data.ASPDbContext _userManager
@inject UserManager<ASPprojektUser> UserManager
@{
    ViewData["Title"] = "Users";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Users</h1>
@ViewBag.Mess

        <table class = "table">
    <tr>
       <th>
            @Html.DisplayNameFor(model => model.FirstName)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.LastName)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Email)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Pesel)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Location.Town)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Location.Street)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Position.PositionName)
       </th>
       <th>
            @Html.DisplayNameFor(model => model.Status)
       </th>
       <th>
            Role
       </th>
        <th></th>
    </tr>
@foreach (var item in Model)
    {
         <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.FirstName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.LastName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Pesel)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Location.Town)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Location.Street)
                </td>
                <td>
                   @Html.DisplayFor(modelItem => item.Position.PositionName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Status)
                </td>
                <td>
                        @{
                            var roles = UserManager.GetRolesAsync(item).Result;
                            foreach (var role in roles)
                            {
                                <text>@role</text>
                            }
                        }
                </td>
                <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new {  id=item.Id })
                </td>
            </tr>
    }
            </table>
